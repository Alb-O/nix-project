#!/usr/bin/env bash
# Post-commit hook to sync scripts across branches

set -euo pipefail

# Only run if the flag file exists
if [[ -f .git/SCRIPT_SYNC_NEEDED ]]; then
    echo "Syncing scripts across branches..."
    
    # Run the sync script
    if ./scripts/sync-scripts.sh; then
        echo "Scripts synced successfully"
    else
        echo "Script sync failed - you may need to run ./scripts/sync-scripts.sh manually"
    fi
    
    # Remove the flag file
    rm -f .git/SCRIPT_SYNC_NEEDED
fi

exit 0